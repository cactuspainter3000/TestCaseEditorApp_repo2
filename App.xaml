<Application x:Class="TestCaseEditorApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:TestCaseEditorApp.Converters">
    <Application.Resources>
        <ResourceDictionary>
            <!-- Global system color overrides for orange caret -->
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="#FF8C00"/>
            <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="#FF8C00"/>
            
            <!-- GLOBAL TEXTBOX CARET OVERRIDE - Only sets caret color -->
            <Style TargetType="TextBox">
                <Setter Property="CaretBrush">
                    <Setter.Value>
                        <SolidColorBrush Color="#FF8C00"/>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- Register converters here so they're available app-wide -->
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" CollapseWhenFalse="True" />
            <conv:InvertedBoolToVisibilityConverter x:Key="InvertedBoolToVis" />
            <conv:AddOneConverter x:Key="AddOneConverter" />
            <conv:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
            <conv:AnalysisStatusToColorConverter x:Key="AnalysisStatusToColorConverter" />
            <conv:AnalysisStatusToTextConverter x:Key="AnalysisStatusToTextConverter" />
            <conv:ProgressToWidthConverter x:Key="ProgressToWidthConverter" />
            <conv:BoolToStatusColorConverter x:Key="BoolToStatusColorConverter" />

            <ResourceDictionary.MergedDictionaries>
                <!-- ===================================== -->
                <!-- DESIGN SYSTEM - LOAD FIRST            -->
                <!-- ===================================== -->
                <!-- DesignSystem.xaml contains all color, typography, and spacing tokens.
                     Must be loaded first so other resources can reference these tokens. -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/DesignSystem.xaml" />
                
                <!-- ===================================== -->
                <!-- CORE STYLES                           -->
                <!-- ===================================== -->
                <!-- Colors.xaml now references DesignSystem, kept for backward compatibility -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/Colors.xaml" />
                
                <!-- Component styles (reference DesignSystem tokens) -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/ButtonStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/Controls/Button.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/TextStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/ComboBoxStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/ContainerStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/InputStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/ListStyles.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/CommonHeaderResources.xaml" />
                
                <!-- SharedStyles contains UI building blocks (badges, pills, menu items) -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/SharedStyles.xaml" />
                
                <!-- ===================================== -->
                <!-- LEGACY RESOURCES                      -->
                <!-- ===================================== -->
                <!-- Kept for backward compatibility, gradually migrate to DesignSystem -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/MainWindowResources.xaml" />
                <ResourceDictionary Source="/TestCaseEditorApp;component/Resources/MenuTemplates.xaml" />
                
                <!-- ===================================== -->
                <!-- CONTROL TEMPLATES                     -->
                <!-- ===================================== -->
                <!-- EditableDataControl template -->
                <ResourceDictionary Source="/TestCaseEditorApp;component/MVVM/Controls/EditableDataControl/Themes/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>