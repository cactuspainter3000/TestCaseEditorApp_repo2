<UserControl x:Class="TestCaseEditorApp.MVVM.Domains.Requirements.Views.RequirementsMainView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200">
    
    <!-- Main Requirements Domain View -->
    <!-- Provides comprehensive requirements management UI -->
    
    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Title and Description -->
        <StackPanel Grid.Row="0" Margin="20,15,20,10">
            <TextBlock Text="{Binding Title}" FontSize="24" FontWeight="Bold" Foreground="#2C3E50"/>
            <TextBlock Text="{Binding Description}" FontSize="14" Foreground="#7F8C8D" Margin="0,5,0,0"/>
        </StackPanel>
        
        <!-- Action Bar -->
        <Border Grid.Row="1" Background="#F8F9FA" Padding="15,10" Margin="20,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Import/Export Section -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button Content="Import" Command="{Binding ImportCommand}" 
                            Background="#3498DB" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                    <Button Content="Import Additional" Command="{Binding ImportAdditionalCommand}" 
                            Background="#1ABC9C" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                    <Button Content="Export" Command="{Binding ExportCommand}" 
                            Background="#E67E22" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                </StackPanel>
                
                <!-- Analysis Section -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="20,0">
                    <Button Content="Analyze Selected" Command="{Binding AnalyzeSelectedCommand}" 
                            Background="#9B59B6" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                    <Button Content="Analyze All" Command="{Binding AnalyzeAllCommand}" 
                            Background="#8E44AD" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                    <Button Content="Analyze Unanalyzed" Command="{Binding AnalyzeUnanalyzedCommand}" 
                            Background="#7D3C98" Foreground="White" Padding="15,8" 
                            BorderThickness="0" />
                </StackPanel>
                
                <!-- Utilities Section -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="20,0,0,0">
                    <Button Content="Clear All" Command="{Binding ClearAllCommand}" 
                            Background="#E74C3C" Foreground="White" Padding="15,8" 
                            Margin="0,0,10,0" BorderThickness="0" />
                    <Button Content="Refresh" Command="{Binding RefreshCommand}" 
                            Background="#95A5A6" Foreground="White" Padding="15,8" 
                            BorderThickness="0" />
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <Grid Grid.Row="2" Margin="20,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Requirements List -->
            <Border Grid.Column="0" BorderBrush="#BDC3C7" BorderThickness="1" Background="White">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Search and Filter Header -->
                    <Border Grid.Row="0" Background="#ECF0F1" Padding="15,10" BorderThickness="0,0,0,1" BorderBrush="#BDC3C7">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Search Box -->
                            <TextBox Grid.Row="0" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                                     FontSize="14" Padding="10,8" Margin="0,0,0,8"
                                     BorderBrush="#95A5A6" Background="White">
                                <TextBox.Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="TextBox">
                                                    <Border Background="{TemplateBinding Background}" 
                                                            BorderBrush="{TemplateBinding BorderBrush}" 
                                                            BorderThickness="1" CornerRadius="4">
                                                        <Grid>
                                                            <ScrollViewer x:Name="PART_ContentHost" />
                                                            <TextBlock Text="Search requirements..." 
                                                                       Foreground="#95A5A6" Margin="10,8"
                                                                       IsHitTestVisible="False">
                                                                <TextBlock.Style>
                                                                    <Style TargetType="TextBlock">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource TemplatedParent}}" Value="">
                                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </TextBlock.Style>
                                                            </TextBlock>
                                                        </Grid>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>
                            
                            <!-- Filter Options -->
                            <StackPanel Grid.Row="1" Orientation="Horizontal">
                                <CheckBox Content="Analyzed Only" IsChecked="{Binding ShowAnalyzedOnly}" 
                                          Margin="0,0,15,0" FontSize="13"/>
                                <CheckBox Content="Unanalyzed Only" IsChecked="{Binding ShowUnanalyzedOnly}" 
                                          FontSize="13"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Statistics Bar -->
                    <Border Grid.Row="1" Background="#F8F9FA" Padding="15,8" BorderThickness="0,0,0,1" BorderBrush="#BDC3C7">
                        <TextBlock FontSize="12" Foreground="#7F8C8D">
                            <Run Text="Total: "/><Run Text="{Binding TotalRequirements}"/>
                            <Run Text=" | Analyzed: "/><Run Text="{Binding AnalyzedRequirements}"/>
                            <Run Text=" | Filtered: "/><Run Text="{Binding FilteredRequirements.Count}"/>
                        </TextBlock>
                    </Border>
                    
                    <!-- Requirements ListBox -->
                    <ListBox Grid.Row="2" ItemsSource="{Binding FilteredRequirements}" 
                             SelectedItem="{Binding SelectedRequirement}"
                             BorderThickness="0" Margin="0" Padding="0"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="15,10" BorderThickness="0,0,0,1" BorderBrush="#ECF0F1">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <!-- ID and Status -->
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Column="0" Text="{Binding GlobalId}" 
                                                       FontWeight="SemiBold" FontSize="13" Foreground="#2C3E50"/>
                                            <Border Grid.Column="1" Background="{Binding Analysis, 
                                                    Converter={StaticResource AnalysisStatusToColorConverter}}" 
                                                    CornerRadius="3" Padding="6,2">
                                                <TextBlock Text="{Binding Analysis, 
                                                           Converter={StaticResource AnalysisStatusToTextConverter}}" 
                                                           FontSize="11" Foreground="White" FontWeight="Medium"/>
                                            </Border>
                                        </Grid>
                                        
                                        <!-- Name -->
                                        <TextBlock Grid.Row="1" Text="{Binding Name}" 
                                                   FontSize="12" Foreground="#34495E" 
                                                   Margin="0,3,0,0" FontWeight="Medium"
                                                   TextWrapping="Wrap"/>
                                        
                                        <!-- Description Preview -->
                                        <TextBlock Grid.Row="2" Text="{Binding Description}" 
                                                   FontSize="11" Foreground="#7F8C8D" 
                                                   Margin="0,3,0,0" TextWrapping="Wrap"
                                                   MaxHeight="40" TextTrimming="WordEllipsis"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <!-- Navigation Bar -->
                    <Border Grid.Row="3" Background="#ECF0F1" Padding="15,8" BorderThickness="0,1,0,0" BorderBrush="#BDC3C7">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" FontSize="12" Foreground="#7F8C8D" VerticalAlignment="Center">
                                <Run Text="Item "/><Run Text="{Binding CurrentIndex, Converter={StaticResource AddOneConverter}}"/>
                                <Run Text=" of "/><Run Text="{Binding FilteredRequirements.Count}"/>
                            </TextBlock>
                            
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <Button Content="Previous" Command="{Binding PreviousRequirementCommand}" 
                                        Background="Transparent" BorderBrush="#95A5A6" 
                                        Padding="10,5" Margin="0,0,5,0"/>
                                <Button Content="Next" Command="{Binding NextRequirementCommand}" 
                                        Background="Transparent" BorderBrush="#95A5A6" 
                                        Padding="10,5"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
            
            <!-- Splitter -->
            <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" Background="#BDC3C7"/>
            
            <!-- Requirement Details -->
            <Border Grid.Column="2" BorderBrush="#BDC3C7" BorderThickness="1" Background="White">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Details Header -->
                    <Border Grid.Row="0" Background="#ECF0F1" Padding="15,10" BorderThickness="0,0,0,1" BorderBrush="#BDC3C7">
                        <TextBlock Text="Requirement Details" FontWeight="SemiBold" FontSize="14" Foreground="#2C3E50"/>
                    </Border>
                    
                    <!-- Details Content -->
                    <ScrollViewer Grid.Row="1" Padding="15" VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <StackPanel DataContext="{Binding SelectedRequirement}">
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding}" Value="{x:Null}">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                                
                                <!-- ID -->
                                <TextBlock Text="ID" FontWeight="SemiBold" FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,3"/>
                                <TextBlock Text="{Binding GlobalId}" FontSize="13" Foreground="#2C3E50" Margin="0,0,0,15" 
                                           TextWrapping="Wrap"/>
                                
                                <!-- Name -->
                                <TextBlock Text="Name" FontWeight="SemiBold" FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,3"/>
                                <TextBlock Text="{Binding Name}" FontSize="13" Foreground="#2C3E50" Margin="0,0,0,15" 
                                           TextWrapping="Wrap"/>
                                
                                <!-- Description -->
                                <TextBlock Text="Description" FontWeight="SemiBold" FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,3"/>
                                <TextBlock Text="{Binding Description}" FontSize="13" Foreground="#2C3E50" Margin="0,0,0,15" 
                                           TextWrapping="Wrap"/>
                                
                                <!-- Analysis Status -->
                                <TextBlock Text="Analysis" FontWeight="SemiBold" FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,3"/>
                                <Border Background="{Binding Analysis, Converter={StaticResource AnalysisStatusToColorConverter}}" 
                                        CornerRadius="4" Padding="8,4" HorizontalAlignment="Left" Margin="0,0,0,15">
                                    <TextBlock Text="{Binding Analysis, Converter={StaticResource AnalysisStatusToTextConverter}}" 
                                               Foreground="White" FontSize="12" FontWeight="Medium"/>
                                </Border>
                                
                                <!-- Analysis Results (if available) -->
                                <Border Visibility="{Binding Analysis, Converter={StaticResource NullToVisibilityConverter}, 
                                                     ConverterParameter=Reverse}">
                                    <StackPanel>
                                        <TextBlock Text="Analysis Results" FontWeight="SemiBold" FontSize="12" 
                                                   Foreground="#7F8C8D" Margin="0,0,0,8"/>
                                        <!-- Add analysis details here based on your Analysis model -->
                                        <TextBlock Text="Analysis completed successfully" FontSize="12" 
                                                   Foreground="#27AE60" Margin="0,0,0,15"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                            
                            <!-- No Selection Message -->
                            <TextBlock Text="Select a requirement to view details" 
                                       FontStyle="Italic" Foreground="#95A5A6" 
                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                       Visibility="{Binding SelectedRequirement, 
                                                  Converter={StaticResource NullToVisibilityConverter}}"/>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
        
        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#34495E" Padding="20,8" Margin="20,10,20,15">
            <TextBlock Text="{Binding StatusMessage}" Foreground="White" FontSize="12"/>
        </Border>
    </Grid>
    
    <UserControl.Resources>
        <!-- Value Converters would need to be implemented -->
        <!-- For now using basic styling -->
        <Style TargetType="Button">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.8"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
</UserControl>